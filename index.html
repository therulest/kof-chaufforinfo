<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KOF ‚Äì Chauff√∂rsportal</title>
<style>
:root{
  --border:#e5e7eb;--shadow:0 1px 3px rgba(0,0,0,.05);--wrap:1000px;
  --ink:#0f172a;--muted:#475569;--blue:#0284c7;--blue-ink:#0369a1;--blue-100:#e0f2fe;--chip-bg:#f8fafc
}
*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f9fafb;color:var(--ink)}

/* ===== Topbar ===== */
.topbar{
  background:#fff;
  position:sticky;
  top:0;
  z-index:10;
  transition:box-shadow .18s,border-color .18s;
  border-bottom:none; /* vi ers√§tter med bl√• linje */
}
.topbar::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:6px;
  background:#0ea5e9; /* bl√• linje */
}
.topbar.scrolled{box-shadow:0 6px 18px rgba(2,8,23,.06);}
.topbar .wrap{max-width:var(--wrap);margin:0 auto;padding:10px 16px;display:flex;align-items:center;justify-content:space-between;gap:14px}

/* Brand / logo */
.brand{display:flex;align-items:center;text-decoration:none}
.brand-logo{height:38px;width:auto;display:block;transition:opacity .15s}
.brand:hover .brand-logo{opacity:.9}
@media(max-width:700px){.brand-logo{height:32px}}

/* Toppmeny */
.nav{display:flex;gap:6px;background:var(--chip-bg);padding:6px;border:1px solid var(--border);border-radius:9999px;box-shadow:var(--shadow);align-items:center;position:relative}
.nav a{--pad-x:14px;text-decoration:none;color:#334155;padding:8px var(--pad-x);border-radius:9999px;font-size:14px;font-weight:600;line-height:1;transition:background .15s,box-shadow .15s,color .15s,transform .04s}
.nav a:hover{background:#eef2f7}
.nav a:active{transform:translateY(1px)}
.nav a.active{background:var(--blue-100);color:var(--blue-ink);box-shadow:inset 0 0 0 1px #bae6fd}
.nav a:focus-visible{outline:2px solid #93c5fd;outline-offset:2px}

/* Dropdown f√∂r Distrikt */
.dropdown{position:relative}
.dropdown > a{display:inline-flex;align-items:center;gap:6px}
.dropdown .chev{font-size:12px;transition:transform .18s}
.dropdown.open > a .chev{transform:rotate(180deg)}
.dropdown-menu{
  position:absolute;top:100%;left:50%;transform:translateX(-50%);
  background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:0 10px 24px rgba(2,8,23,.12);
  padding:8px;display:none;min-width:260px;
}
.dropdown.open .dropdown-menu{display:block}
.dropdown-menu a{display:flex;align-items:center;gap:10px;border-radius:10px;padding:10px 12px;color:#0f172a;text-decoration:none}
.dropdown-menu a:hover{background:#f1f5f9}
.dm-badge{
  width:28px;height:28px;border-radius:8px;display:grid;place-items:center;
  font-weight:800;color:#0b1324;background:linear-gradient(135deg,#e0f2fe,#c7e2ff);
  border:1px solid #cde6ff; box-shadow:inset 0 1px 0 rgba(255,255,255,.8);
  font-size:12px
}

/* Mobil-ikon-grid */
.mobile-launcher{display:none}
@media(max-width:700px){.nav{display:none}.mobile-launcher{display:block}}
.mobile-launcher .wrap{max-width:var(--wrap);margin:12px auto 0;padding:0 16px}
.ml-grid{background:#f2f3f7;border:1px solid #e9e9ee;border-radius:18px;padding:14px;display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
@media(max-width:700px){.ml-grid.collapsed .ml-item:nth-child(n+5){display:none}}
.ml-toggle{display:none}
@media(max-width:700px){
  .ml-toggle{display:flex;justify-content:center;margin-top:8px}
  .ml-toggle button{
    appearance:none;background:#fff;border:1px solid var(--border);
    border-radius:9999px;padding:8px 12px;font-weight:700;cursor:pointer;box-shadow:var(--shadow)
  }
  .ml-toggle button:active{transform:translateY(1px)}
}
.ml-item{display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px 6px;border-radius:12px;text-decoration:none;color:#111;transition:transform .06s,box-shadow .15s,background .15s}
.ml-item:hover{background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.08)}
.ml-item:active{transform:translateY(1px)}
.micon{width:48px;height:48px;border-radius:12px;background:#fff;display:grid;place-items:center;box-shadow:0 1px 3px rgba(0,0,0,.08);font-size:24px}
.micon.badge{background:linear-gradient(135deg,#e0f2fe,#c7e2ff);border:1px solid #cde6ff;font-weight:800;font-size:14px;color:#0b1324}
.ml-label{font-size:13px;color:#111827;font-weight:600}

/* Sidlayout */
.page{max-width:var(--wrap);margin:16px auto;padding:0 16px 24px}
.page h2{margin:0}

/* Flikar p√• regionsidor */
.tabs{display:flex;gap:16px;border-bottom:1px solid #e8eef6;margin:0 0 14px}
.tabs a{padding:10px 2px;text-decoration:none;color:#334155;font-weight:700;position:relative}
.tabs a.active{color:#0369a1}
.tabs a.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:3px;border-radius:3px;background:#7dd3fc}

/* Dagab cards */
.tools{display:flex;align-items:center;gap:12px;justify-content:space-between;margin:8px 0 12px}
.tools-left{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.tools-right{margin-left:auto;color:var(--muted);font-size:12px}
.btn{appearance:none;border:1px solid #0273ad;background:var(--blue);color:#fff;font-weight:700;border-radius:10px;padding:8px 12px;cursor:pointer;box-shadow:var(--shadow);transition:filter .15s,transform .04s}
.btn:hover{filter:brightness(1.05)}
.btn:active{transform:translateY(1px)}
.btn:disabled{opacity:.6;cursor:progress}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(270px,1fr));gap:16px;margin-top:10px}
.card{border:1px solid var(--border);border-radius:12px;background:#fff;box-shadow:var(--shadow);overflow:hidden;cursor:pointer;transition:box-shadow .15s}
.card:hover{box-shadow:0 3px 10px rgba(0,0,0,.08)}
.card-header{display:flex;align-items:center;gap:10px;padding:12px}
.chev{transition:transform .18s;user-select:none;font-size:16px}
.card.expanded .chev{transform:rotate(90deg)}
.summary{white-space:pre-wrap;margin:0;flex:1;font-size:14px;line-height:1.3}
.divider{border:none;border-top:1px solid #eee;margin:0}
.details{display:none;padding:10px 14px 12px}
.card.expanded .details{display:block}
.details ul{margin:8px 0 0 0;padding-left:20px;line-height:1.4}
.details li{margin-bottom:6px}
.details li.qty{color:#4b5563;margin-bottom:8px}
.details li.total{font-weight:700;margin-top:4px;margin-bottom:8px}
.details li.note{margin-top:6px;color:#991b1b}
.muted{color:#6b7280;font-size:13px}

/* Nyheter */
.news{display:grid;grid-template-columns:1fr;gap:12px;width:100%;margin:0}
.news .item{border:1px solid var(--border);border-radius:12px;background:#fff;box-shadow:var(--shadow);padding:16px;cursor:pointer;transition:box-shadow .15s}
.news .item:hover{box-shadow:0 3px 10px rgba(0,0,0,.08)}
.news .item h3{margin:0 0 6px}
.news .meta{font-size:12px;color:#6b7280;margin-bottom:8px}
.news .more{color:var(--blue);font-weight:600;margin-top:6px;user-select:none}
.news .item.collapsed .more::after{content:" ‚Äì klicka f√∂r att l√§sa mer"}
.news .item.expanded .more::after{content:" ‚Äì klicka f√∂r att visa mindre"}
@keyframes flash{0%{box-shadow:0 0 0 0 rgba(2,132,199,.45)}40%{box-shadow:0 0 0 6px rgba(2,132,199,.15)}100%{box-shadow:0 1px 3px rgba(0,0,0,.05)}}
.highlight{animation:flash 1.3s ease-out 1}

/* Kontakter */
.contacts-toolbar{display:flex;align-items:center;gap:10px;margin:8px 0 12px}
.select{appearance:none;background:#fff;border:1px solid var(--border);border-radius:10px;padding:8px 12px;font-size:14px;box-shadow:var(--shadow)}
.contacts-acc{display:grid;gap:10px}
.contact-group{margin-top:18px}
.contact-group h3{margin:0 0 8px;font-size:16px;font-weight:800;color:#0f172a;display:flex;align-items:center;gap:8px}
.contact-count{font-size:12px;color:#475569;background:#eef2f7;border:1px solid #e5e7eb;border-radius:9999px;padding:2px 8px}
.contact-card{border:1px solid var(--border);border-radius:12px;background:#fff;box-shadow:var(--shadow);overflow:hidden}
.contact-head{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;cursor:pointer}
.contact-head .name{font-weight:600}
.contact-head .chev{transition:transform .18s;font-size:16px}
.contact-card.open .contact-head .chev{transform:rotate(90deg)}
.contact-body{display:none;padding:0 14px 12px 14px}
.contact-card.open .contact-body{display:block}
.contact-body .row{margin:8px 0;color:#374151}
.contact-body a{color:#0ea5e9;text-decoration:none}

@media (prefers-reduced-motion: reduce){.chev,.nav a,.ml-item,.topbar,.dropdown .chev{transition:none}}
</style>
</head>
<body>

<header class="topbar" id="topbar">
  <div class="wrap">
    <a href="#/home" class="brand">
      <img src="https://kylofrysexpressen.se/wp-content/themes/kof/images/kyl-o-frys-logo.png" alt="Kyl & Frysexpressen Nord AB" class="brand-logo">
    </a>
    <nav class="nav" aria-label="Huvudmeny">
      <a href="#/home" id="link-home">Home</a>
      <a href="#/dagab" id="link-dagab">Dagab</a>
      <div class="dropdown" id="dd-distrikt">
        <a href="#/distrikt" id="link-distrikt" aria-haspopup="true" aria-expanded="false">
          Distrikt <span class="chev">‚ñæ</span>
        </a>
        <div class="dropdown-menu" role="menu" aria-label="Distrikt">
          <a href="#/nyheter" role="menuitem"><span class="dm-badge">üì∞</span> Nyheter</a>
          <a href="#/fjarr" role="menuitem"><span class="dm-badge">FJ</span> Fj√§rr</a>
          <a href="#/sundsvall" role="menuitem"><span class="dm-badge">SU</span> Sundsvall</a>
          <a href="#/ostersund" role="menuitem"><span class="dm-badge">√ñS</span> √ñstersund</a>
          <a href="#/umea" role="menuitem"><span class="dm-badge">UM</span> Ume√•</a>
          <a href="#/lulea" role="menuitem"><span class="dm-badge">LU</span> Lule√•</a>
          <a href="#/stab" role="menuitem"><span class="dm-badge">ST</span> Stab</a>
        </div>
      </div>
      <a href="#/kontakter" id="link-kontakter">Kontakter</a>
    </nav>
  </div>
</header>

<!-- Mobil snabbmeny -->
<div class="mobile-launcher" aria-label="Snabbmeny">
  <div class="wrap">
    <div class="ml-grid collapsed" id="mlGrid">
      <a class="ml-item" href="#/home"><span class="micon">üè†</span><span class="ml-label">Home</span></a>
      <a class="ml-item" href="#/nyheter"><span class="micon">üì∞</span><span class="ml-label">Nyheter</span></a>
      <a class="ml-item" href="#/dagab"><span class="micon">üöö</span><span class="ml-label">Dagab</span></a>
      <a class="ml-item" href="#/kontakter"><span class="micon">üë•</span><span class="ml-label">Kontakter</span></a>
      <a class="ml-item" href="#/fjarr"><span class="micon badge">FJ</span><span class="ml-label">Fj√§rr</span></a>
      <a class="ml-item" href="#/sundsvall"><span class="micon badge">SU</span><span class="ml-label">Sundsvall</span></a>
      <a class="ml-item" href="#/ostersund"><span class="micon badge">√ñS</span><span class="ml-label">√ñstersund</span></a>
      <a class="ml-item" href="#/umea"><span class="micon badge">UM</span><span class="ml-label">Ume√•</span></a>
      <a class="ml-item" href="#/lulea"><span class="micon badge">LU</span><span class="ml-label">Lule√•</span></a>
      <a class="ml-item" href="#/stab"><span class="micon badge">ST</span><span class="ml-label">Stab</span></a>
    </div>
    <div class="ml-toggle">
      <button id="mlMoreBtn" aria-expanded="false" aria-controls="mlGrid" type="button">Visa fler ‚ñæ</button>
    </div>
  </div>
</div>

<main>
  <!-- HOME (utan v√§lkomsttext) -->
  <section id="page-home" class="page" data-page>
    <h3 style="margin-top:0">üì∞ Senaste nytt</h3>
    <div id="latestNewsHome" class="news"></div>
  </section>

  <!-- DAGAB -->
  <section id="page-dagab" class="page" data-page hidden>
    <div class="tools">
      <div class="tools-left">
        <h2>Dagens turer</h2>
        <button id="btnRefresh" class="btn">Uppdatera</button>
      </div>
      <div class="tools-right"><span id="status"></span></div>
    </div>
    <div id="grid" class="grid"></div>
  </section>

  <!-- NYHETER -->
  <section id="page-nyheter" class="page" data-page hidden>
    <h2>Nyheter</h2>
    <div id="newsList" class="news"></div>
  </section>

  <!-- KONTAKTER -->
  <section id="page-kontakter" class="page" data-page hidden>
    <div class="contacts-toolbar">
      <h2 style="margin-right:auto">Kontakter</h2>
      <label for="roleFilter" class="muted" style="font-size:13px">Filter:</label>
      <select id="roleFilter" class="select" aria-label="Filtrera p√• roll"></select>
    </div>
    <div id="contactsList"></div>
  </section>
</main>

<script type="module">
/* === Routing === */
function setActive(hash){
  document.querySelectorAll('.
















